<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blombly Companion - Control Flow</title>
    <link rel="stylesheet" rel="prefetch" href="style.css">
    <link rel="stylesheet" rel="prefetch" href="prism.css">
</head>
<body>
<div class="sidebar">
    <h2>Blombly Companion</h2>
    <a rel="prefetch" href="index.html">Home</a>
    <a rel="prefetch" href="introduction.html">Introduction</a>
    <p><strong>Set things up</strong></p>
    <a rel="prefetch" href="hello-world.html">1.1 Hello world!</a>
    <a rel="prefetch" href="errors.html">1.2 Errors</a>
    <p><strong>Basic features</strong></p>
    <a rel="prefetch" href="vars-operations-comments.html">2.1 Vars, operations, comments</a>
    <a rel="prefetch" href="control-flow.html" style="color: orange;">2.2 Control flow</a>
    <a rel="prefetch" href="code-blocks-inline.html">2.3 Code blocks & inline</a>
    <a rel="prefetch" href="calling-blocks.html">2.4 Calling blocks</a>
    <a rel="prefetch" href="structs.html">2.5 Structs</a>
    <p><strong>Advanced features</strong></p>
    <a rel="prefetch" href="return-from-new.html">3.1 Return from new</a>
    <a rel="prefetch" href="overloading.html">3.2 Overloading</a>
</div>

<h1>Control Flow</h1>

<p>Control flow in blombly follows the familiar structure of most programming 
languages to alter which code statements are executed next. Aside from
inling and calling code blocks, which are described in the
<a rel="prefetch" href="code-blocks-inline.html">next section</a> and
<a rel="prefetch" href="calling-blocks.html">section 2.4</a> respctively,
the main control flows are the <i>if</i> and <i>while</i> statements, which
implement conditional branching and loops respectively. Here we also describe
blombly's success-error handling mechanism that further enriches control flow.
This is a little more unique.
</p>


<p>Conditional statements evaluate expressions within the current context
and execute the associated code block if the outcome is <i>true</i>.
There may also be an optional <i>else</i> branch that is executed if the
expression evaluates to <i>false</i>.</p>

<pre><code class="language-java">if (expression) {
    // code to be executed if expression is true
}
else {
    // code to be executed if expression is false
}
</code></pre>


<p>The <i>while</i> statement continuously executes a code block as long as the expression evaluates to <i>true</i>,
where the expression is re-evaluated at each repetition. 
This creates a loop that can run indefinitely if the condition never becomes false. The syntax is as follows:</p>

<pre><code class="language-java">while (expression) {
    // code to be executed as long as expression is true
}</code></pre>

<p>Here is an example where loop runs as long as the condition <i>counter &lt; 5</i> 
holds <i>true</i>. During each iteration, the loop prints the current value of the
<i>counter</i> and increments it by 1. Once that value becomes 5, 
the condition evaluates <i>false</i>, and the loop terminates.</p>

<i>main.bb</i>
<pre><code class="language-java">counter = 0;
while (counter&lt;10) {
    print("Counter is: " + str(counter));
    counter = counter + 1;
}</code></pre>


<h1>Success-error handling</h1>

<p>This is a mechanism that consists of two parts. First is a <i>try</i>
statement, which is applied on a block of code to obtain the outcome
of any internal <i>return</i> or <i>fail</i> signals; these are otherwise
ways of escaping calling methods by immediately returning values or
creating errors, but <i>try</i> ensures that any such signals are intercepted.
Its outcome is the intercepted signal and can be assigned to a variable for
further handling, like so:
</p>

<i>main.bb</i>
<pre><code class="language-java">result = try {
    x = x+1;  // invalid code that creates an error (missing variable x)
}
print(result); 
print("Successfully intercepted the above error");
</code></pre>

<p>Similarly to other control flow statements, brackets
are optional for a <i>try</i> that is applied to only one statement.
For example, this can be used to create syntactic variation of
other control flow statements to effectively let them compute
values, break loops, or detect if loops where not broken. As a 
simple example, here is an one-liner that computes the sign 
of a variable <i>x</i>.</p>

<pre><code class="language-java">sgn = try if(x>=0) return 1 else return -1;
</code></pre>

<p>You will typically want to differentiate between those <i>try</i> results
that hold errors and those that do not. This is achieved through the <i>catch</i>
statement; this is near-identical to a conditional statement with the only difference 
being that it checks whether condition is an error (instead of checking a boolean value). 
An example usage of this statement  is demonstrated in the example below. In this, the
<i>try</i> statement is responsible for extracting the found value of <i>i</i> obtained
from the <i>return</i> statement inside the loop, which also stops the loops immediately.
If no value was returned, <i>try</i> assigns an error to the result saying so. The code
then uses <i>catch</i> to handle that scenario differently by manually creating a new
error using the <i>fail</i> statement. Notice that there can be more code between trying
and catching errors in a result.</p> 

<i>main.bb</i>
<pre><code class="language-java">least = 4;
i = 0;
result = try while (counter&lt;=100) {
    i = i + 3;
    if (i&gt;=least) 
        return i;
}
print("Finished searching.");
catch (result) 
    fail("Failed to find value");
print("The least multiple of 3 in range ["+str(least)+", 100] is: "+str(result));
</code></pre>

 


<script src="prism.min.js"></script>
<script src="prism-java.min.js"></script>
</body>
</html>
